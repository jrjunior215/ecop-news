<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πà‡∏≤‡∏ß news.ejs -->
<div class="container_news">
    <h1>News</h1>
    <img id="news-image" src="" alt="">
    <div class="header_news">
        <h1 id="news-title"></h1>
        <span id="news-date"></span>
    </div>
    <div class="desc_news" id="news-content">
    </div>
</div>

<script>
    window.onload = async function () {
        try {
            // ‡∏î‡∏∂‡∏á ID ‡∏Ç‡πà‡∏≤‡∏ß‡∏à‡∏≤‡∏Å URL
            const newsId = window.location.pathname.split('/').pop();

            // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ID ‡πÑ‡∏õ‡∏¢‡∏±‡∏á backend ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß
            const response = await fetch(`http://localhost:8000/api/news/searchNewsById?id=${newsId}`);
            const data = await response.json();
            console.log("üöÄ ~ data:", data)

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß‡∏ñ‡∏π‡∏Å‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (data && data.success && data.data) {
                const selectedNews = data.data; // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÇ‡∏î‡∏¢‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ path ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏±‡∏ö URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏ô object ‡∏Ç‡πà‡∏≤‡∏ß
                const imageUrl = `/images/${selectedNews.imgLinks}.webp`;

                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ src attribute ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏Å <img>
                document.getElementById('news-image').setAttribute('src', imageUrl);
                // ‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô HTML
                document.getElementById('news-title').textContent = selectedNews.titleTh;
                
                // ‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏ß‡∏±‡∏ô, ‡∏õ‡∏µ"
                const formattedDate = new Date(selectedNews.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                document.getElementById('news-date').textContent = formattedDate;
                
                // ‡πÉ‡∏ä‡πâ innerHTML ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á tag HTML ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢
                document.getElementById('news-content').innerHTML = selectedNews.contentTh;
            } else {
                console.log('News not found.');
            }
        } catch (error) {
            console.error('Error loading news:', error);
        }
    };
</script>
